<!DOCTYPE html>
<html>
<head>
  <script src="bower_components/lodash/lodash.js"></script>
  <script src="scripts/polyfill.js"></script>
  <script data-main="scripts/main" src="bower_components/requirejs/require.js"></script>
  <style>
   #main-canvas {
      border: 1px dotted gray;
      x-cursor: crosshair;
   }
  </style>
</head>
<body>
  <div>
    <canvas id="main-canvas" width="500" height="500"></canvas>
    <pre id="selected-data" style="display: inline-block; vertical-align: top; width: 300px; border: 1px solid black;">Info</pre>
  </div>
  <div>
    <button id="btn-clear">Clear</button>
    <button id="btn-load-reset">Load &amp; Reset</button>
    <button id="btn-load-no-reset">Load</button>
    <button id="btn-load-random">Random</button>
    |
    <button id="btn-play">Play</button>
    <button id="btn-tick">Tick</button>
  </div>
  <textarea id="map-data" style="width: 500px; height: 500px">
{
  "nodes": [
    {"t": "n", "x": 340, "y": 370},
    {"t": "s", "x": 310, "y": 390},
    {"t": "n", "x": 300, "y": 280},
    {"t": "s", "x": 210, "y": 260},
    {"t": "s", "x": 370, "y": 300},
    {"t": "n", "x": 90, "y": 270},
    {"t": "n", "x": 30, "y": 40},
    {"t": "n", "x": 160, "y": 280},
    {"t": "n", "x": 150, "y": 110},
    {"t": "n", "x": 180, "y": 270},
    {"t": "t", "x": 310, "y": 250},
    {"t": "s", "x": 390, "y": 310},
    {"t": "n", "x": 270, "y": 400},
    {"t": "n", "x": 400, "y": 30},
    {"t": "t", "x": 370, "y": 80},
    {"t": "s", "x": 280, "y": 280},
    {"t": "s", "x": 260, "y": 30},
    {"t": "n", "x": 390, "y": 190},
    {"t": "n", "x": 350, "y": 70},
    {"t": "t", "x": 290, "y": 130},
    {"t": "s", "x": 110, "y": 20},
    {"t": "t", "x": 360, "y": 320},
    {"t": "n", "x": 130, "y": 70},
    {"t": "n", "x": 20, "y": 230},
    {"t": "n", "x": 310, "y": 130},
    {"t": "n", "x": 70, "y": 90},
    {"t": "n", "x": 20, "y": 290},
    {"t": "n", "x": 290, "y": 160},
    {"t": "n", "x": 310, "y": 330},
    {"t": "s", "x": 200, "y": 370},
    {"t": "n", "x": 330, "y": 280},
    {"t": "s", "x": 210, "y": 50},
    {"t": "s", "x": 50, "y": 220},
    {"t": "t", "x": 170, "y": 350},
    {"t": "s", "x": 230, "y": 50},
    {"t": "n", "x": 100, "y": 40},
    {"t": "s", "x": 290, "y": 230},
    {"t": "n", "x": 70, "y": 10},
    {"t": "n", "x": 230, "y": 170},
    {"t": "n", "x": 360, "y": 130},
    {"t": "n", "x": 200, "y": 10},
    {"t": "s", "x": 240, "y": 200},
    {"t": "n", "x": 260, "y": 180},
    {"t": "s", "x": 300, "y": 260},
    {"t": "n", "x": 200, "y": 140},
    {"t": "s", "x": 290, "y": 270},
    {"t": "n", "x": 270, "y": 370},
    {"t": "n", "x": 230, "y": 230},
    {"t": "n", "x": 370, "y": 170},
    {"t": "n", "x": 230, "y": 260}
  ],
  "edges": [
    {"s": 10, "e": 28},
    {"s": 36, "e": 19},
    {"s": 3, "e": 49},
    {"s": 49, "e": 43},
    {"s": 27, "e": 19},
    {"s": 45, "e": 9},
    {"s": 45, "e": 5},
    {"s": 27, "e": 36},
    {"s": 3, "e": 43},
    {"s": 24, "e": 39},
    {"s": 6, "e": 35},
    {"s": 49, "e": 38},
    {"s": 44, "e": 40},
    {"s": 49, "e": 34},
    {"s": 24, "e": 28},
    {"s": 24, "e": 19},
    {"s": 0, "e": 29},
    {"s": 5, "e": 45},
    {"s": 24, "e": 10},
    {"s": 28, "e": 10},
    {"s": 23, "e": 47},
    {"s": 7, "e": 2},
    {"s": 28, "e": 24},
    {"s": 38, "e": 34},
    {"s": 14, "e": 4},
    {"s": 38, "e": 47},
    {"s": 7, "e": 15},
    {"s": 23, "e": 26},
    {"s": 0, "e": 46},
    {"s": 29, "e": 0},
    {"s": 43, "e": 49},
    {"s": 14, "e": 48},
    {"s": 37, "e": 40},
    {"s": 46, "e": 0},
    {"s": 29, "e": 46},
    {"s": 49, "e": 3},
    {"s": 15, "e": 2},
    {"s": 43, "e": 3},
    {"s": 43, "e": 2},
    {"s": 9, "e": 5},
    {"s": 15, "e": 7},
    {"s": 46, "e": 12},
    {"s": 5, "e": 9},
    {"s": 21, "e": 39},
    {"s": 38, "e": 49},
    {"s": 9, "e": 45},
    {"s": 39, "e": 19},
    {"s": 4, "e": 48},
    {"s": 31, "e": 34},
    {"s": 48, "e": 14},
    {"s": 39, "e": 21},
    {"s": 10, "e": 24},
    {"s": 42, "e": 16},
    {"s": 46, "e": 29},
    {"s": 2, "e": 7},
    {"s": 48, "e": 4},
    {"s": 39, "e": 24},
    {"s": 36, "e": 47},
    {"s": 19, "e": 39},
    {"s": 2, "e": 15},
    {"s": 47, "e": 23},
    {"s": 19, "e": 36},
    {"s": 47, "e": 49},
    {"s": 19, "e": 27},
    {"s": 19, "e": 24},
    {"s": 11, "e": 17},
    {"s": 34, "e": 31},
    {"s": 34, "e": 38},
    {"s": 13, "e": 16},
    {"s": 16, "e": 13},
    {"s": 34, "e": 47},
    {"s": 34, "e": 49},
    {"s": 36, "e": 27},
    {"s": 47, "e": 38},
    {"s": 35, "e": 6},
    {"s": 26, "e": 23},
    {"s": 47, "e": 36},
    {"s": 40, "e": 44},
    {"s": 2, "e": 43},
    {"s": 47, "e": 34},
    {"s": 4, "e": 14},
    {"s": 40, "e": 37},
    {"s": 17, "e": 11},
    {"s": 12, "e": 46},
    {"s": 16, "e": 42},
    {"s": 49, "e": 47},
    {"s": 45, "e": 15},
    {"s": 15, "e": 45},
    {"s": 10, "e": 43},
    {"s": 2, "e": 45},
    {"s": 43, "e": 10},
    {"s": 43, "e": 45},
    {"s": 45, "e": 43},
    {"s": 45, "e": 2},
    {"s": 4, "e": 11},
    {"s": 35, "e": 20},
    {"s": 9, "e": 7},
    {"s": 4, "e": 21},
    {"s": 11, "e": 4},
    {"s": 18, "e": 14},
    {"s": 7, "e": 9},
    {"s": 14, "e": 18},
    {"s": 20, "e": 35},
    {"s": 21, "e": 4},
    {"s": 3, "e": 9},
    {"s": 21, "e": 11},
    {"s": 42, "e": 38},
    {"s": 41, "e": 38},
    {"s": 9, "e": 3},
    {"s": 41, "e": 47},
    {"s": 43, "e": 36},
    {"s": 47, "e": 41},
    {"s": 38, "e": 42},
    {"s": 23, "e": 32},
    {"s": 2, "e": 10},
    {"s": 32, "e": 23},
    {"s": 36, "e": 43},
    {"s": 11, "e": 21},
    {"s": 38, "e": 41},
    {"s": 10, "e": 2},
    {"s": 40, "e": 31},
    {"s": 37, "e": 20},
    {"s": 1, "e": 12},
    {"s": 45, "e": 10},
    {"s": 41, "e": 42},
    {"s": 31, "e": 40},
    {"s": 39, "e": 48},
    {"s": 12, "e": 1},
    {"s": 42, "e": 41},
    {"s": 10, "e": 45},
    {"s": 48, "e": 17},
    {"s": 20, "e": 37},
    {"s": 48, "e": 39},
    {"s": 43, "e": 15},
    {"s": 36, "e": 10},
    {"s": 15, "e": 43},
    {"s": 10, "e": 36},
    {"s": 17, "e": 48},
    {"s": 9, "e": 49},
    {"s": 39, "e": 14},
    {"s": 28, "e": 2},
    {"s": 28, "e": 21},
    {"s": 14, "e": 39},
    {"s": 49, "e": 9},
    {"s": 2, "e": 28},
    {"s": 21, "e": 28},
    {"s": 3, "e": 47},
    {"s": 0, "e": 1},
    {"s": 27, "e": 24},
    {"s": 1, "e": 0},
    {"s": 45, "e": 49},
    {"s": 16, "e": 34},
    {"s": 47, "e": 3},
    {"s": 29, "e": 33},
    {"s": 39, "e": 18},
    {"s": 30, "e": 10},
    {"s": 27, "e": 42},
    {"s": 18, "e": 39},
    {"s": 34, "e": 16},
    {"s": 33, "e": 29},
    {"s": 49, "e": 45},
    {"s": 24, "e": 27},
    {"s": 42, "e": 27},
    {"s": 10, "e": 30},
    {"s": 7, "e": 5},
    {"s": 7, "e": 33},
    {"s": 33, "e": 7},
    {"s": 5, "e": 7},
    {"s": 46, "e": 1},
    {"s": 8, "e": 22},
    {"s": 1, "e": 46},
    {"s": 22, "e": 8},
    {"s": 46, "e": 15},
    {"s": 38, "e": 44},
    {"s": 37, "e": 35},
    {"s": 15, "e": 10},
    {"s": 35, "e": 22},
    {"s": 44, "e": 38},
    {"s": 22, "e": 35},
    {"s": 15, "e": 46},
    {"s": 44, "e": 31},
    {"s": 20, "e": 40},
    {"s": 31, "e": 44},
    {"s": 35, "e": 37},
    {"s": 40, "e": 20},
    {"s": 10, "e": 15},
    {"s": 21, "e": 0},
    {"s": 20, "e": 22},
    {"s": 15, "e": 9},
    {"s": 9, "e": 15},
    {"s": 16, "e": 31},
    {"s": 22, "e": 20},
    {"s": 28, "e": 30},
    {"s": 31, "e": 16},
    {"s": 0, "e": 21},
    {"s": 30, "e": 28},
    {"s": 21, "e": 30},
    {"s": 40, "e": 16},
    {"s": 30, "e": 21},
    {"s": 22, "e": 25},
    {"s": 0, "e": 28},
    {"s": 16, "e": 40},
    {"s": 25, "e": 22},
    {"s": 3, "e": 5},
    {"s": 28, "e": 0},
    {"s": 6, "e": 37},
    {"s": 5, "e": 3},
    {"s": 37, "e": 6},
    {"s": 26, "e": 7},
    {"s": 26, "e": 5},
    {"s": 5, "e": 26},
    {"s": 7, "e": 26},
    {"s": 36, "e": 41},
    {"s": 25, "e": 35},
    {"s": 19, "e": 42},
    {"s": 14, "e": 13},
    {"s": 42, "e": 19},
    {"s": 15, "e": 28},
    {"s": 13, "e": 14},
    {"s": 42, "e": 36},
    {"s": 48, "e": 21},
    {"s": 21, "e": 48},
    {"s": 35, "e": 25},
    {"s": 8, "e": 44},
    {"s": 44, "e": 8},
    {"s": 36, "e": 42},
    {"s": 28, "e": 15},
    {"s": 41, "e": 36},
    {"s": 46, "e": 28},
    {"s": 25, "e": 8},
    {"s": 17, "e": 13},
    {"s": 8, "e": 25},
    {"s": 13, "e": 17},
    {"s": 28, "e": 46},
    {"s": 36, "e": 49},
    {"s": 49, "e": 36},
    {"s": 32, "e": 47},
    {"s": 10, "e": 27},
    {"s": 47, "e": 32},
    {"s": 27, "e": 10},
    {"s": 6, "e": 23},
    {"s": 23, "e": 6},
    {"s": 13, "e": 18},
    {"s": 33, "e": 46},
    {"s": 25, "e": 6},
    {"s": 46, "e": 33},
    {"s": 6, "e": 25},
    {"s": 18, "e": 13},
    {"s": 12, "e": 29},
    {"s": 29, "e": 12},
    {"s": 14, "e": 17},
    {"s": 4, "e": 17},
    {"s": 17, "e": 14},
    {"s": 17, "e": 4},
    {"s": 24, "e": 18},
    {"s": 18, "e": 24},
    {"s": 31, "e": 38},
    {"s": 38, "e": 31},
    {"s": 32, "e": 25},
    {"s": 25, "e": 32},
    {"s": 44, "e": 47},
    {"s": 47, "e": 44},
    {"s": 13, "e": 11},
    {"s": 23, "e": 5},
    {"s": 11, "e": 13},
    {"s": 5, "e": 23},
    {"s": 16, "e": 19},
    {"s": 0, "e": 11},
    {"s": 11, "e": 0},
    {"s": 24, "e": 30},
    {"s": 19, "e": 16},
    {"s": 30, "e": 24},
    {"s": 22, "e": 37},
    {"s": 37, "e": 22},
    {"s": 19, "e": 18},
    {"s": 16, "e": 18},
    {"s": 20, "e": 8},
    {"s": 32, "e": 6},
    {"s": 18, "e": 19},
    {"s": 18, "e": 16},
    {"s": 6, "e": 32},
    {"s": 8, "e": 20},
    {"s": 42, "e": 34},
    {"s": 34, "e": 42},
    {"s": 40, "e": 13},
    {"s": 13, "e": 40},
    {"s": 30, "e": 39},
    {"s": 39, "e": 30},
    {"s": 40, "e": 8},
    {"s": 8, "e": 40},
    {"s": 5, "e": 47},
    {"s": 47, "e": 5},
    {"s": 25, "e": 44},
    {"s": 44, "e": 25},
    {"s": 15, "e": 33},
    {"s": 33, "e": 15},
    {"s": 14, "e": 30},
    {"s": 30, "e": 14},
    {"s": 26, "e": 33},
    {"s": 33, "e": 26},
    {"s": 32, "e": 44},
    {"s": 44, "e": 32},
    {"s": 47, "e": 26},
    {"s": 26, "e": 47},
    {"s": 26, "e": 29},
    {"s": 29, "e": 26}
  ]
}
  </textarea>
 
  <textarea id="map-data-x" style="width: 500px; height: 500px">
 {
  "nodes": [
    {"t": "s", "x": 58, "y": 161},
    {"t": "s", "x": 58, "y": 217},
    {"t": "s", "x": 58, "y": 292},
    {"t": "t", "x": 401, "y": 157},
    {"t": "t", "x": 401, "y": 218},
    {"t": "t", "x": 401, "y": 285},
    {"t": "n", "x": 133, "y": 226},
    {"t": "n", "x": 306, "y": 229}
  ],
  "edges": [
    {"s": 0, "e": 6},
    {"s": 6, "e": 7},
    {"s": 7, "e": 3},
    {"s": 1, "e": 6},
    {"s": 2, "e": 6},
    {"s": 7, "e": 4},
    {"s": 7, "e": 5}
  ]
}
  </textarea>
<div id='crash-test'>
  {
  "nodes": [
    {"t": "n", "x": 100, "y": 100},
    {"t": "s", "x": 150, "y": 100},
    {"t": "s", "x": 100, "y": 150},
    {"t": "t", "x": 50, "y": 50}
  ],
  "edges": [
    {"s": 2, "e": 0},
    {"s": 1, "e": 0},
    {"s": 0, "e": 3}
  ]
}
</div>
<div id="routing-test">
{
  "nodes": [
    {"t": "n", "x": 150, "y": 50, "destination": "south"},
    {"t": "n", "x": 50, "y": 150, "destination": "east"},
    {"t": "t", "x": 150, "y": 250, "name": "south", "colour": "#F0F"},
    {"t": "t", "x": 250, "y": 150, "name": "east", "colour": "#FF0"},
    {"t": "n", "x": 150, "y": 150},
    {"t": "s", "x": 50, "y": 50, "destination": ["south", "east"]},
    {"t": "t", "x": 250, "y": 250}
  ],
  "edges": [
    {"s": 0, "e": 4},
    {"s": 4, "e": 2},
    {"s": 1, "e": 4},
    {"s": 4, "e": 3},
    {"s": 5, "e": 4},
    {"s": 4, "e": 6}
  ]
}
</div>
</body>
</html>
